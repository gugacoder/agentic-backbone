[
  {
    "id": "F-001",
    "name": "KaiAgentEvent types expansion",
    "description": "Adicionar os novos tipos de evento (ask_user, todo_update) ao KaiAgentEvent em src/types.ts. Expandir a union type para suportar os novos eventos que serao emitidos pelas ferramentas AskUser e TodoWrite.",
    "status": "passing",
    "completed_at": "2026-02-16",
    "priority": 1,
    "tests": [
      "src/types.ts exporta KaiAgentEvent com type 'ask_user' contendo { question: string, options?: string[] }",
      "src/types.ts exporta KaiAgentEvent com type 'todo_update' contendo { todos: Array<{ id, content, status, priority }> }",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-002",
    "name": "T08: ListDir tool",
    "description": "Criar src/tools/list-dir.ts — lista arquivos e pastas de um diretorio como arvore indentada. Parametros: path (string, obrigatorio), depth (number, opcional, default 3), ignore (string[], opcional, default ['node_modules', '.git', 'dist', 'build']). Retorna string com arvore de diretorio. Registrar em codingTools.",
    "status": "passing",
    "completed_at": "2026-02-16",
    "priority": 2,
    "tests": [
      "Arquivo src/tools/list-dir.ts existe e exporta listDirTool",
      "codingTools em src/tools/index.ts inclui ListDir",
      "Parametro path e obrigatorio e validado com Zod",
      "Parametro depth e opcional com default 3",
      "Parametro ignore e opcional com default sensato",
      "Retorna arvore indentada com dirs e files",
      "Respeita depth maximo",
      "Ignora padroes em ignore[]",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-003",
    "name": "T07: MultiEdit tool",
    "description": "Criar src/tools/multi-edit.ts — aplica multiplas substituicoes num unico arquivo atomicamente. Parametros: file_path (string), edits (array de { old_string, new_string, replace_all? }). Se qualquer edit falhar, nenhum e aplicado. Reutilizar logica do Edit. Registrar em codingTools.",
    "status": "failing",
    "priority": 3,
    "tests": [
      "Arquivo src/tools/multi-edit.ts existe e exporta multiEditTool",
      "codingTools em src/tools/index.ts inclui MultiEdit",
      "Aplica multiplas edicoes sequencialmente",
      "Se qualquer old_string nao for encontrada, nenhuma edicao e aplicada (atomicidade)",
      "Suporta replace_all por edicao individual",
      "Retorna quantas edicoes foram aplicadas",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-004",
    "name": "T05+T06: TodoWrite + TodoRead tools",
    "description": "Criar src/tools/todo.ts com duas ferramentas: TodoWrite (cria/atualiza lista de tarefas) e TodoRead (le lista atual). A lista vive em memoria durante a sessao. TodoWrite emite evento 'todo_update' no AsyncGenerator. Parametros TodoWrite: todos (array de { id, content, status, priority }). TodoRead: sem parametros. Registrar ambas em codingTools.",
    "status": "pending",
    "priority": 4,
    "tests": [
      "Arquivo src/tools/todo.ts existe e exporta todoWriteTool e todoReadTool",
      "codingTools em src/tools/index.ts inclui TodoWrite e TodoRead",
      "TodoWrite aceita array de todos com id, content, status e priority",
      "TodoWrite substitui a lista inteira a cada chamada",
      "TodoRead retorna lista formatada ou 'Nenhuma tarefa registrada.'",
      "Estado compartilhado entre TodoWrite e TodoRead na mesma sessao",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-001"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-005",
    "name": "T09: Diagnostics tool",
    "description": "Criar src/tools/diagnostics.ts — wrapper inteligente sobre Bash que executa checagem de tipos/lint e retorna erros formatados. Parametros: command (string, opcional, default 'npx tsc --noEmit'), file_path (string, opcional, filtrar erros para arquivo). Retorna erros encontrados ou 'Nenhum erro encontrado.'. Registrar em codingTools.",
    "status": "failing",
    "priority": 5,
    "tests": [
      "Arquivo src/tools/diagnostics.ts existe e exporta diagnosticsTool",
      "codingTools em src/tools/index.ts inclui Diagnostics",
      "Parametro command e opcional com default 'npx tsc --noEmit'",
      "Parametro file_path e opcional para filtrar erros",
      "Executa comando e parseia saida para formato estruturado",
      "Retorna 'Nenhum erro encontrado.' se limpo",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-006",
    "name": "T01: AskUser tool",
    "description": "Criar src/tools/ask-user.ts — permite ao agente fazer perguntas ao usuario durante execucao. Parametros: question (string, obrigatorio), options (string[], opcional). Emite evento 'ask_user' no AsyncGenerator e aguarda resposta. O mecanismo de callback deve ser injetavel via KaiAgentOptions ou contexto da tool. Registrar em codingTools.",
    "status": "pending",
    "priority": 6,
    "tests": [
      "Arquivo src/tools/ask-user.ts existe e exporta askUserTool (ou factory)",
      "codingTools em src/tools/index.ts inclui AskUser",
      "Parametro question e obrigatorio",
      "Parametro options e opcional (string[])",
      "Mecanismo para emitir evento ask_user e aguardar resposta esta implementado",
      "Retorna string com a resposta do usuario",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-001"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-007",
    "name": "T02: WebFetch tool",
    "description": "Criar src/tools/web-fetch.ts — busca conteudo de uma URL e retorna como markdown/texto. Parametros: url (string, obrigatorio), prompt (string, opcional). Converte HTML para markdown (adicionar dependencia turndown ou similar). Timeout 30s. Limite 50KB. Registrar em codingTools.",
    "status": "failing",
    "priority": 7,
    "tests": [
      "Arquivo src/tools/web-fetch.ts existe e exporta webFetchTool",
      "codingTools em src/tools/index.ts inclui WebFetch",
      "Parametro url e obrigatorio e validado com Zod",
      "Parametro prompt e opcional",
      "Faz fetch HTTP da URL",
      "Converte HTML para markdown",
      "Trunca em 50KB",
      "Timeout de 30 segundos implementado",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-008",
    "name": "T03: WebSearch tool",
    "description": "Criar src/tools/web-search.ts — pesquisa na web e retorna resultados formatados. Parametros: query (string, obrigatorio), numResults (number, opcional, default 5). Provider de busca plugavel via KaiAgentOptions. Retorna titulo, URL e snippet de cada resultado. Registrar em codingTools.",
    "status": "failing",
    "priority": 8,
    "tests": [
      "Arquivo src/tools/web-search.ts existe e exporta webSearchTool (ou factory)",
      "codingTools em src/tools/index.ts inclui WebSearch",
      "Parametro query e obrigatorio",
      "Parametro numResults e opcional com default 5",
      "Provider de busca e plugavel (nao hardcoded)",
      "Retorna resultados formatados com titulo, URL e snippet",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-009",
    "name": "T04: Task (sub-agente) tool",
    "description": "Criar src/tools/task.ts — lanca sub-agente para executar tarefa autonomamente. Parametros: description (string, obrigatorio), prompt (string, obrigatorio). Sub-agente recebe mesmas codingTools, executa em sessao isolada, herda model e apiKey do pai. Usa runKaiAgent() internamente. Respeita maxSteps (sub-limite). Registrar em codingTools.",
    "status": "failing",
    "priority": 9,
    "tests": [
      "Arquivo src/tools/task.ts existe e exporta taskTool (ou factory)",
      "codingTools em src/tools/index.ts inclui Task",
      "Parametro description e obrigatorio",
      "Parametro prompt e obrigatorio",
      "Sub-agente usa runKaiAgent() internamente",
      "Sub-agente herda model e apiKey do agente pai",
      "Sub-agente executa em sessao isolada (sem historico do pai)",
      "Sub-agente tem sub-limite de maxSteps",
      "Retorna resultado do sub-agente como string",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-010",
    "name": "T10: Batch tool",
    "description": "Criar src/tools/batch.ts — executa 2-10 chamadas de ferramentas simultaneamente via Promise.all(). Parametros: tool_calls (array de { tool: string, parameters: object }, min 2, max 10). Falhas parciais nao cancelam as outras. Nao permite Batch dentro de Batch. Referencia ferramentas pelo nome em codingTools. Registrar em codingTools.",
    "status": "failing",
    "priority": 10,
    "tests": [
      "Arquivo src/tools/batch.ts existe e exporta batchTool (ou factory)",
      "codingTools em src/tools/index.ts inclui Batch",
      "Parametro tool_calls valida min 2 e max 10 items",
      "Executa todas as chamadas em paralelo com Promise.all()",
      "Falhas parciais nao cancelam as demais",
      "Nao permite Batch dentro de Batch (rejeita chamadas recursivas)",
      "Retorna resultados indexados",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-011",
    "name": "T11: ApplyPatch tool",
    "description": "Criar src/tools/apply-patch.ts — aplica patches multi-arquivo no formato envelope (Begin Patch / End Patch). Suporta Add File, Update File, Delete File. Formato diff com +/- e @@ context lines. Registrar em codingTools.",
    "status": "failing",
    "priority": 11,
    "tests": [
      "Arquivo src/tools/apply-patch.ts existe e exporta applyPatchTool",
      "codingTools em src/tools/index.ts inclui ApplyPatch",
      "Parametro patch e obrigatorio (string)",
      "Parseia formato '*** Begin Patch' / '*** End Patch'",
      "Suporta '*** Add File: path' com linhas +",
      "Suporta '*** Update File: path' com @@ context, -/+ linhas",
      "Suporta '*** Delete File: path'",
      "Retorna resumo das operacoes executadas",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-012",
    "name": "T12: CodeSearch tool",
    "description": "Criar src/tools/code-search.ts — busca exemplos de codigo, docs de APIs e padroes de bibliotecas online. Parametros: query (string, obrigatorio). Provider plugavel via KaiAgentOptions. Retorna exemplos de codigo e trechos de documentacao. Registrar em codingTools.",
    "status": "failing",
    "priority": 12,
    "tests": [
      "Arquivo src/tools/code-search.ts existe e exporta codeSearchTool (ou factory)",
      "codingTools em src/tools/index.ts inclui CodeSearch",
      "Parametro query e obrigatorio",
      "Provider de busca e plugavel (nao hardcoded)",
      "Retorna exemplos de codigo e documentacao formatados",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  },
  {
    "id": "F-013",
    "name": "Tool registry final + build validation",
    "description": "Validacao final: codingTools exporta 15 ferramentas (6 existentes + 9 novas). Novos eventos (ask_user, todo_update) tipados. Build compila sem erros. Nenhuma ferramenta existente quebrou.",
    "status": "blocked",
    "priority": 13,
    "tests": [
      "codingTools em src/tools/index.ts exporta exatamente 15 ferramentas",
      "Ferramentas existentes (Read, Write, Edit, Bash, Glob, Grep) continuam funcionando",
      "Novas ferramentas: ListDir, MultiEdit, TodoWrite, TodoRead, Diagnostics, AskUser, WebFetch, WebSearch, Task, Batch, ApplyPatch, CodeSearch",
      "Wait — 6 + 12 = 18? Nao: PRP diz 6->15 = 9 novas. Contar: AskUser, WebFetch, WebSearch, Task, TodoWrite, TodoRead, MultiEdit, ListDir, Diagnostics, Batch, ApplyPatch, CodeSearch = 12 novas. Total 18. Ajustar conforme PRP real.",
      "KaiAgentEvent inclui ask_user e todo_update",
      "npm run build --workspace=packages/kai-sdk compila sem erros",
      "Nenhum import quebrado em src/index.ts"
    ],
    "dependencies": [
      "F-001",
      "F-002",
      "F-003",
      "F-004",
      "F-005",
      "F-006",
      "F-007",
      "F-008",
      "F-009",
      "F-010",
      "F-011",
      "F-012"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\01-better-kay\\PRP.md"
  }
]
