[
  {
    "id": "F-001",
    "name": "provider-registry-module",
    "description": "Criar packages/kai-sdk/src/providers.ts com createKaiProviderRegistry() que encapsula createOpenAICompatible para OpenRouter, aceita apiKey e aliases opcionais, retorna objeto com model() e aliases. Incluir DEFAULT_ALIASES (fast, balanced, strong). Exportar tipo KaiProviderConfig.",
    "status": "passing",
    "completed_at": "2026-02-17T23:50:00Z",
    "priority": 1,
    "tests": [
      "Arquivo packages/kai-sdk/src/providers.ts existe",
      "Exporta createKaiProviderRegistry e KaiProviderConfig",
      "createKaiProviderRegistry({ apiKey: '...' }) retorna objeto com .model() e .aliases",
      "DEFAULT_ALIASES contém fast→anthropic/claude-haiku-4.5, balanced→anthropic/claude-sonnet-4, strong→anthropic/claude-opus-4.6",
      "registry.model('anthropic/claude-sonnet-4') retorna um LanguageModel (ID completo funciona)",
      "registry.model('fast') resolve para anthropic/claude-haiku-4.5 (alias funciona)",
      "Aliases customizados sobrescrevem defaults: createKaiProviderRegistry({ apiKey, aliases: { fast: 'x/y' } }).aliases.fast === 'x/y'",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-002",
    "name": "types-model-aliases",
    "description": "Adicionar campo modelAliases?: Record<string, string> em KaiAgentOptions (packages/kai-sdk/src/types.ts). Campo opcional que permite ao consumidor definir aliases de modelo.",
    "status": "passing",
    "completed_at": "2026-02-18T00:10:00Z",
    "priority": 2,
    "tests": [
      "KaiAgentOptions possui campo modelAliases?: Record<string, string>",
      "Campo é opcional — KaiAgentOptions sem modelAliases compila normalmente",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-003",
    "name": "agent-integration",
    "description": "Refatorar agent.ts para usar createKaiProviderRegistry() ao invés de createOpenAICompatible() inline. Criar o registry com apiKey e modelAliases do options. Usar providers.model() em todos os pontos que chamam openrouter().",
    "status": "failing",
    "priority": 3,
    "tests": [
      "agent.ts não contém mais createOpenAICompatible import/uso",
      "agent.ts importa createKaiProviderRegistry de ./providers.js",
      "registry é criado com { apiKey: options.apiKey, aliases: options.modelAliases }",
      "openrouter(options.model) substituído por providers.model(options.model) em todos os usos",
      "prepareStep model override usa providers.model(overrides.model)",
      "runKaiAgent({ model: 'anthropic/claude-sonnet-4', apiKey }) funciona como antes (backward compat)",
      "runKaiAgent({ model: 'fast', apiKey }) resolve para alias default",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-001",
      "F-002"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-004",
    "name": "compaction-integration",
    "description": "Refatorar compaction.ts para aceitar providers opcionais via CompactOptions. Se providers for passado, usá-lo ao invés de criar createOpenAICompatible() inline. Se não for passado, criar provider internamente (backward compat). Atualizar agent.ts para passar providers na chamada de compactMessages().",
    "status": "blocked",
    "priority": 4,
    "tests": [
      "CompactOptions possui campo providers? do tipo ReturnType<typeof createKaiProviderRegistry>",
      "compaction.ts com providers passado não cria createOpenAICompatible() — reutiliza o registry",
      "compaction.ts sem providers passado cria provider internamente (backward compat)",
      "agent.ts passa providers na chamada de compactMessages()",
      "Compaction funciona como antes quando chamada diretamente sem providers (backward compat)",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-001",
      "F-003"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-005",
    "name": "structured-integration",
    "description": "Refatorar structured.ts (kaiGenerateObject, kaiStreamObject) para aceitar providers opcionais via KaiObjectOptions. Se passado, reutilizar; se não, criar provider internamente (backward compat). Eliminar duplicação de createOpenAICompatible.",
    "status": "pending",
    "priority": 5,
    "tests": [
      "KaiObjectOptions possui campo providers? opcional",
      "kaiGenerateObject com providers passado não cria createOpenAICompatible() — reutiliza o registry",
      "kaiStreamObject com providers passado não cria createOpenAICompatible() — reutiliza o registry",
      "kaiGenerateObject sem providers cria provider internamente (backward compat)",
      "kaiStreamObject sem providers cria provider internamente (backward compat)",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-001"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-006",
    "name": "exports-index",
    "description": "Exportar createKaiProviderRegistry e KaiProviderConfig do packages/kai-sdk/src/index.ts para que consumidores possam importar do pacote.",
    "status": "pending",
    "priority": 6,
    "tests": [
      "index.ts exporta createKaiProviderRegistry de ./providers.js",
      "index.ts exporta type KaiProviderConfig de ./providers.js",
      "npm run build --workspace=packages/kai-sdk compila sem erros",
      "Imports de '@agentic-backbone/kai-sdk' resolvem createKaiProviderRegistry"
    ],
    "dependencies": [
      "F-001"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  },
  {
    "id": "F-007",
    "name": "build-verification",
    "description": "Verificação final: build completo do workspace kai-sdk sem erros e sem regressões. Garantir que nenhum createOpenAICompatible() inline permanece em agent.ts (os demais mantêm fallback interno).",
    "status": "blocked",
    "priority": 7,
    "tests": [
      "npm run build --workspace=packages/kai-sdk compila sem erros",
      "agent.ts não contém nenhum import de @ai-sdk/openai-compatible",
      "Nenhuma instância de createOpenAICompatible em agent.ts",
      "compaction.ts mantém createOpenAICompatible apenas no fallback interno (quando providers não é passado)",
      "structured.ts mantém createOpenAICompatible apenas no fallback interno (quando providers não é passado)",
      "Todos os tipos exportados do index.ts estão acessíveis"
    ],
    "dependencies": [
      "F-003",
      "F-004",
      "F-005",
      "F-006"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\apps\\backbone\\milestones\\10-kai-provider-registry\\PRP.md"
  }
]
