[
  {
    "id": "F-001",
    "name": "prompt-modules-md",
    "description": "Criar os arquivos markdown modulares do system prompt em src/prompts/: identity.md, tool-guide.md, patterns.md, safety.md. Cada arquivo segue as especificacoes do PRP (conteudo em ingles, limites de tokens, formato especificado).",
    "status": "passing",
    "completed_at": "2026-02-16T21:30:00Z",
    "priority": 1,
    "tests": [
      "Arquivo src/prompts/identity.md existe e contem identidade KAI (~150 tokens, ingles, tom neutro)",
      "Arquivo src/prompts/tool-guide.md existe com regras universais (~200 tokens, sem instrucoes por ferramenta)",
      "Arquivo src/prompts/patterns.md existe com 5 padroes de trabalho (~150 tokens)",
      "Arquivo src/prompts/safety.md existe com limites do agente (~100 tokens)",
      "Nenhum modulo referencia outro modulo (independentes)"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-002",
    "name": "tool-specific-prompts",
    "description": "Criar os arquivos markdown por ferramenta em src/prompts/tools/: read.md, write.md, edit.md, bash.md, glob.md, grep.md. Cada um segue formato padrao (Use para / NAO use para / Dica) com max 100 tokens.",
    "status": "passing",
    "completed_at": "2026-02-16T22:15:00Z",
    "priority": 2,
    "tests": [
      "Arquivo src/prompts/tools/read.md existe (Use para: ler conteudo, NAO use para: ler diretorios)",
      "Arquivo src/prompts/tools/write.md existe (Use para: criar arquivos novos, NAO use para: editar trechos)",
      "Arquivo src/prompts/tools/edit.md existe (Use para: substituir trechos, NAO use para: reescrever inteiro)",
      "Arquivo src/prompts/tools/bash.md existe (Use para: git/npm/build, NAO use para: ler/buscar)",
      "Arquivo src/prompts/tools/glob.md existe (Use para: encontrar arquivos, NAO use para: buscar conteudo)",
      "Arquivo src/prompts/tools/grep.md existe (Use para: buscar conteudo, NAO use para: encontrar por nome)",
      "Cada arquivo nao excede 100 tokens",
      "Todos seguem formato padrao: header, Use para, NAO use para, Dica"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-003",
    "name": "assembler-getSystemPrompt",
    "description": "Criar src/prompts/assembly.ts com a funcao getSystemPrompt(activeTools: string[]): string. Os .md sao embutidos como strings no build (nao lidos do filesystem em runtime). Monta na ordem: identity -> tool-guide -> tools filtrados -> patterns -> safety. Separacao: uma linha em branco entre modulos.",
    "status": "failing",
    "priority": 3,
    "tests": [
      "Funcao getSystemPrompt existe em src/prompts/assembly.ts",
      "Aceita activeTools: string[] e retorna string",
      "Ordem de montagem: identity, tool-guide, tools (filtrados), patterns, safety",
      "Apenas tools/*.md correspondentes a activeTools sao incluidos (ex: ['Read', 'Bash'] inclui apenas read.md e bash.md)",
      "Ferramentas desconhecidas em activeTools sao ignoradas silenciosamente",
      "Separacao entre secoes e uma linha em branco",
      "Sem XML tags ou headers extras no wrapper",
      "Os .md sao embutidos como strings (import ou inline), nao lidos via fs em runtime",
      "Total do system prompt base nao excede 2000 tokens com as 6 ferramentas"
    ],
    "dependencies": [
      "F-001",
      "F-002"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-004",
    "name": "discover-project-context",
    "description": "Criar funcao discoverProjectContext(cwd: string): Promise<string> em src/prompts/assembly.ts. Sobe a arvore de diretorios do cwd ate .git ou raiz do filesystem, procurando AGENTS.md e CLAUDE.md. Concatena na ordem raiz -> cwd. Ignora vazios. Trunca se exceder 4000 tokens.",
    "status": "failing",
    "priority": 4,
    "tests": [
      "Funcao discoverProjectContext existe em src/prompts/assembly.ts",
      "Aceita cwd: string e retorna Promise<string>",
      "Encontra AGENTS.md no cwd",
      "Encontra CLAUDE.md no cwd",
      "Sobe arvore de diretorios ate encontrar .git ou raiz do filesystem",
      "Em cada diretorio procura AGENTS.md primeiro, depois CLAUDE.md",
      "Concatena na ordem raiz -> cwd (menor -> maior precedencia)",
      "Cada arquivo incluido tem separador: '--- project context: {path} ---'",
      "Ignora arquivos vazios",
      "Trunca se total exceder 4000 tokens (remove arquivos mais distantes primeiro)",
      "Retorna string vazia se nenhum arquivo encontrado"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-005",
    "name": "system-option-types",
    "description": "Atualizar KaiAgentOptions em types.ts: campo system passa de 'string | undefined' para 'string | { append: string } | undefined'. Adicionar campo cwd?: string. Garantir que o tipo e exportado corretamente via index.ts.",
    "status": "failing",
    "priority": 5,
    "tests": [
      "KaiAgentOptions.system aceita string (override total)",
      "KaiAgentOptions.system aceita { append: string } (append ao base)",
      "KaiAgentOptions.system aceita undefined (default auto)",
      "KaiAgentOptions.cwd aceita string opcional",
      "Tipos exportados corretamente via index.ts",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-006",
    "name": "export-public-api",
    "description": "Exportar getSystemPrompt e discoverProjectContext via src/index.ts como parte da API publica do SDK.",
    "status": "blocked",
    "priority": 6,
    "tests": [
      "getSystemPrompt e exportado de src/index.ts",
      "discoverProjectContext e exportado de src/index.ts",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-003",
      "F-004"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-007",
    "name": "agent-integration-3-modes",
    "description": "Modificar runKaiAgent() em agent.ts para implementar os 3 modos de system prompt: (1) omitido -> getSystemPrompt(tools) + discoverProjectContext(cwd), (2) { append } -> base + contexto + append, (3) string -> override total. A descoberta de contexto executa uma vez no inicio. Extrair activeTools dos nomes das tools resolvidas.",
    "status": "blocked",
    "priority": 7,
    "tests": [
      "system omitido: agente usa prompt base (getSystemPrompt) + contexto auto-descoberto (discoverProjectContext)",
      "system: { append: '...' }: agente usa prompt base + contexto + append do consumidor",
      "system: 'string': agente usa apenas a string fornecida (sem base, sem descoberta)",
      "activeTools sao extraidos dos nomes das ferramentas resolvidas (Object.keys(tools))",
      "discoverProjectContext e chamado uma vez no inicio (nao a cada step)",
      "cwd default e process.cwd() se nao fornecido em options",
      "npm run build --workspace=packages/kai-sdk compila sem erros"
    ],
    "dependencies": [
      "F-003",
      "F-004",
      "F-005",
      "F-006"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  },
  {
    "id": "F-008",
    "name": "build-validation",
    "description": "Validacao final: garantir que o build completo do workspace kai-sdk compila sem erros, que as exportacoes estao corretas e que o system prompt total (com 6 ferramentas padrao) nao excede 2000 tokens.",
    "status": "blocked",
    "priority": 8,
    "tests": [
      "npm run build --workspace=packages/kai-sdk compila sem erros",
      "Todas as funcoes e tipos listados no index.ts sao resolviveis",
      "System prompt base com ['Read', 'Write', 'Edit', 'Bash', 'Glob', 'Grep'] nao excede 2000 tokens",
      "Nenhum .md e lido via fs.readFile em runtime (todos embutidos como strings)"
    ],
    "dependencies": [
      "F-007"
    ],
    "prp_path": "D:\\sources\\codr.studio\\cia-prime-care\\agentic-backbone\\packages\\kai-sdk\\milestones\\02-kai-brain\\PRP.md"
  }
]
